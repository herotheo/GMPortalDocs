# 1.5 支持HTTP各个版本之间的转换

### 产品指标

新渡-国密安全WEB网关支持HTTP各个版本之间的转换，具体如下：

| WEB应用到网关 | 网关到后端服务器 | 是否支持 |
| :-----------: | :--------------: | :------: |
|    HTTP1.1    |     HTTP1.1      |    是    |
|    HTTP1.1    |      HTTP2       |    是    |
|     HTTP2     |     HTTP1.1      |    是    |
|     HTTP2     |      HTTP2       |    是    |

### 指标演示

<p style="color:red;font-weight:bold">
       注:此次演示使用国密通信，以WEB应用到网关使用HTTP2，网关到后端服务器使用HTTP2为例
</p>


* 演示项目：WEB应用到网关使用HTTP2，网关到后端服务器使用HTTP2

* 预期结果：WEB应用成功与"新渡-国密安全WEB网关"建立国密通信，并且WEB应用到网关与网关到后端服务器的抓包数据均显示使用的HTTP版本为HTTP2。

* 演示过程：

  1. 我们首先将网关使用HTTP版本配置为只支持HTTP2，并将网关到后端服务器的HTTP版本也更改为HTTP2。

  2. 然后打开wireshark抓取WEB应用到网关的数据，在网关中使用tcpdump抓取网关到后端服务器的数据。

  3. 接着我们使用奇安信浏览器访问[新渡-国密安全WEB网关](https://home.hccie.com:21443/),由图可看出成功建立了国密通信

     ![image-20220601151217143](../image/image-20220601151217143.png ':size=75%')

  4. 然后我们先分析wireshark抓取的WEB应用到网关的数据包，由图可以看出，WEB应用到网关使用了http2

     ![image-20220608174104639](../image/http2_alpn.png ':size=75%')

  5. 然后我们将网关中使用tcpdump抓取的数据包保存出来，同样使用wireshark进行分析，由图看出，网关到后端服务器使用的HTTP版本为HTTP2

     ![image-20220601143936864](../image/WG-HDht2.png ':size=75%')

至此，"新渡-国密安全WEB网关"HTTP各个版本之间的转换演示完毕，结果与预期结果相同。
