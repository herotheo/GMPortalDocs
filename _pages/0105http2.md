# 1.5 支持HTTP各个版本之间的转换

### 产品指标

新渡-国密安全WEB网关支持HTTP各个版本之间的转换，具体如下：

| 客户端到网关 | 网关到后端服务器 | 是否支持 |
| :----------: | :--------------: | :------: |
|   HTTP1.1    |     HTTP1.1      |    是    |
|   HTTP1.1    |      HTTP2       |    是    |
|    HTTP2     |     HTTP1.1      |    是    |
|    HTTP2     |      HTTP2       |    是    |

### 指标演示

<p style="color:red;font-weight:bold">
       注:此次演示使用国密通信，以客户端到网关使用HTTP2，网关到后端服务器使用HTTP2为例
</p>

* 演示项目：客户端到网关和网关到后端服务器均支持HTTP2

* 预期结果：客户端成功与"新渡-国密安全WEB网关"建立国密通信，并且客户端到网关与网关到后端服务器的抓包数据均显示使用的HTTP版本为HTTP2。

* 演示过程：

  1. 我们首先将网关使用HTTP版本配置为只支持HTTP2，并将网关到后端服务器的HTTP版本也更改为HTTP2。

  2. 然后打开"wireshark"抓取客户端到网关的数据，在后端服务器中使用tcpdump抓取网关到后端服务器的数据。

  3. 接着我们使用"奇安信浏览器"访问"新渡-国密安全WEB网关",由图可看出成功建立了国密通信

     ![image-20220601151217143](../image/image-20220601151217143.png ':size=75%')

  4. 然后我们先分析"wireshark"抓取的客户端到网关的数据包，由图可以看出，客户端到网关使用了http2

     ![image-20220608174104639](../image/http2_alpn.png ':size=75%')

  5. 然后我们将后端服务器中使用tcpdump抓取的数据包保存出来，同样使用"wireshark"进行分析，由图看出，网关到后端服务器使用的HTTP版本为HTTP2

     ![image-20220601143936864](../image/WG-HDht2.png ':size=75%')

至此，"新渡-国密安全WEB网关"HTTP各个版本之间的转换演示完毕，结果与预期结果相同。
